<div class="timer-container">
  <div class="timer-header">
    <div class="header-content">
      <div class="logo-section">
        <div class="tooth-logo">
          <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M50 10 C30 10, 20 20, 20 40 C20 55, 25 70, 30 85 C32 90, 35 95, 40 95 C42 95, 43 93, 44 90 C46 85, 47 80, 48 75 C49 80, 50 85, 52 90 C53 93, 54 95, 56 95 C58 95, 60 93, 62 90 C64 85, 65 80, 66 75 C67 80, 68 85, 70 90 C71 93, 72 95, 74 95 C76 95, 78 93, 80 90 C82 85, 83 80, 84 75 L85 60 C88 45, 90 30, 85 20 C80 12, 70 10, 50 10 Z"
              fill="white" stroke="#a8d8ea" stroke-width="2" />
          </svg>
        </div>
        <h1>SmileCare</h1>
      </div>
      <div class="header-actions">
        <a routerLink="/appointment" class="appointment-link">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6"></line>
            <line x1="8" y1="2" x2="8" y2="6"></line>
            <line x1="3" y1="10" x2="21" y2="10"></line>
          </svg>
          Pedir Cita
        </a>
        <button class="logout-btn" (click)="logout()">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
            <polyline points="16 17 21 12 16 7"></polyline>
            <line x1="21" y1="12" x2="9" y2="12"></line>
          </svg>
          Cerrar SesiÃ³n
        </button>
      </div>
    </div>

    <div class="timer-wrapper">
      <div class="timer-card">
        <div class="timer-title">
          <h2>ğŸª¥ CronÃ³metro de Cepillado ğŸ¦·</h2>
          <p>Â¡CepÃ­llate los dientes durante 3 minutos!</p>
        </div>

        <!-- Diente animado -->
        <div class="tooth-mascot" [class.brushing]="isRunning" [class.happy]="remainingSeconds === 0">
          <svg viewBox="0 0 120 140" xmlns="http://www.w3.org/2000/svg">
            <!-- Diente -->
            <path class="tooth-body"
              d="M60 20 C40 20, 30 28, 30 45 C30 60, 33 75, 38 90 C40 95, 42 100, 47 100 C49 100, 50 98, 51 95 C52 90, 53 85, 54 80 C55 85, 56 90, 57 95 C58 98, 59 100, 62 100 C64 100, 66 98, 67 95 C68 90, 69 85, 70 80 C71 85, 72 90, 73 95 C74 98, 75 100, 78 100 C80 100, 82 98, 84 95 C86 90, 87 85, 88 80 L89 65 C92 50, 93 35, 88 28 C83 22, 75 20, 60 20 Z"
              fill="#f0f8ff" stroke="#5ca3c7" stroke-width="3" />

            <!-- Brillo del diente -->
            <ellipse class="tooth-shine" cx="50" cy="40" rx="8" ry="12" fill="white" opacity="0.6" />

            <!-- Ojos -->
            <g class="eyes">
              <circle class="eye" cx="48" cy="50" r="4" fill="#2c5f7f" />
              <circle class="eye-shine" cx="49" cy="49" r="1.5" fill="white" />
              <circle class="eye" cx="72" cy="50" r="4" fill="#2c5f7f" />
              <circle class="eye-shine" cx="73" cy="49" r="1.5" fill="white" />
            </g>

            <!-- Boca sonriente -->
            <path class="mouth" d="M 45 65 Q 60 72, 75 65" stroke="#2c5f7f" stroke-width="3" fill="none"
              stroke-linecap="round" />

            <!-- Cepillo de dientes (aparece cuando estÃ¡ activo) -->
            <g class="toothbrush" [class.visible]="isRunning">
              <rect x="85" y="35" width="8" height="30" rx="2" fill="#7fb7d4" />
              <rect x="83" y="30" width="12" height="8" rx="3" fill="#5ca3c7" />
              <line x1="87" y1="25" x2="87" y2="30" stroke="#5ca3c7" stroke-width="1" />
              <line x1="89" y1="25" x2="89" y2="30" stroke="#5ca3c7" stroke-width="1" />
              <line x1="91" y1="25" x2="91" y2="30" stroke="#5ca3c7" stroke-width="1" />
            </g>

            <!-- Estrellas cuando termina -->
            <g class="stars" [class.visible]="remainingSeconds === 0">
              <text x="20" y="30" font-size="20" class="star star-1">â­</text>
              <text x="95" y="40" font-size="20" class="star star-2">âœ¨</text>
              <text x="25" y="110" font-size="20" class="star star-3">ğŸŒŸ</text>
              <text x="90" y="105" font-size="20" class="star star-4">ğŸ’«</text>
            </g>
          </svg>
        </div>

        <!-- CÃ­rculo de progreso -->
        <div class="progress-ring">
          <svg width="250" height="250" viewBox="0 0 250 250">
            <!-- CÃ­rculo de fondo -->
            <circle cx="125" cy="125" r="110" fill="none" stroke="#e8f4f8" stroke-width="15" />
            <!-- CÃ­rculo de progreso -->
            <circle class="progress-circle" cx="125" cy="125" r="110" fill="none" stroke="url(#gradient)"
              stroke-width="15" stroke-linecap="round" [style.stroke-dasharray]="690.8"
              [style.stroke-dashoffset]="690.8 - (690.8 * progress / 100)" transform="rotate(-90 125 125)" />
            <defs>
              <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#5ca3c7;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#7fb7d4;stop-opacity:1" />
              </linearGradient>
            </defs>
          </svg>

          <!-- Tiempo en el centro -->
          <div class="time-display">
            <span class="time-number">{{ formattedTime }}</span>
            <span class="time-label">minutos</span>
          </div>
        </div>

        <!-- Consejo actual -->
        <div class="tip-bubble" [class.show]="isRunning || remainingSeconds === 0">
          <div class="bubble-content">
            {{ currentTip }}
          </div>
        </div>

        <!-- Botones de control -->
        <div class="timer-controls">
          <button class="control-btn start-btn" (click)="startTimer()" [disabled]="isRunning"
            *ngIf="!isRunning && remainingSeconds > 0">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
            {{ isPaused ? 'Continuar' : 'Comenzar' }}
          </button>

          <button class="control-btn pause-btn" (click)="pauseTimer()" *ngIf="isRunning">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <rect x="6" y="4" width="4" height="16"></rect>
              <rect x="14" y="4" width="4" height="16"></rect>
            </svg>
            Pausar
          </button>

          <button class="control-btn reset-btn" (click)="resetTimer()"
            [disabled]="!isPaused && !isRunning && remainingSeconds === totalSeconds">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2">
              <polyline points="1 4 1 10 7 10"></polyline>
              <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
            </svg>
            Reiniciar
          </button>
        </div>

        <!-- Mensaje de finalizaciÃ³n -->
        <div class="completion-message" *ngIf="remainingSeconds === 0 && !isRunning">
          <div class="celebration">
            <h3>ğŸŠ Â¡IncreÃ­ble! ğŸŠ</h3>
            <p>Â¡Has cepillado tus dientes durante 3 minutos completos!</p>
            <p class="reward">Â¡Tus dientes estÃ¡n brillantes y sÃºper limpios! â­</p>
          </div>
        </div>
      </div>

      <!-- Tarjeta de informaciÃ³n -->
      <div class="info-sidebar">
        <div class="info-card">
          <h3>ğŸ’¡ Â¿SabÃ­as que...?</h3>
          <div class="fun-facts">
            <div class="fact">
              <span class="fact-icon">ğŸ¦·</span>
              <p>Debes cepillarte los dientes <strong>3 veces al dÃ­a</strong></p>
            </div>
            <div class="fact">
              <span class="fact-icon">â°</span>
              <p>Cada cepillado debe durar <strong>3 minutos</strong></p>
            </div>
            <div class="fact">
              <span class="fact-icon">ğŸª¥</span>
              <p>Cambia tu cepillo cada <strong>3 meses</strong></p>
            </div>
            <div class="fact">
              <span class="fact-icon">ğŸ˜</span>
              <p>Â¡Una sonrisa sana es una <strong>sonrisa feliz</strong>!</p>
            </div>
          </div>
        </div>

        <div class="info-card techniques">
          <h3>ğŸ¯ TÃ©cnica correcta</h3>
          <ol class="technique-list">
            <li>Coloca el cepillo en Ã¡ngulo de 45Â°</li>
            <li>Mueve el cepillo en cÃ­rculos suaves</li>
            <li>Cepilla todas las superficies</li>
            <li>No olvides la lengua</li>
            <li>Enjuaga bien al terminar</li>
          </ol>
        </div>
      </div>
    </div>
  </div>